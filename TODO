-*- outline -*-

* Change the parent state mechanism.

Currently, when searching up the hierarchy with the CTHE_PARENT event, we
check for the top state by comparing the pointer-to-member returned by each
state to the _topState member.  The result of this is that the top state is
never called, even though it must be a real member function.  The only use
for it is as its pointer to member.

This seems wrong.  So change the parent mechanism so that the top state
indicates itself, by returning cth_handled() in response to CTHE_PARENT.
Then the CTHsm methods that check for _topState in response to CTHE_PARENT
would have to instead check for a return value of CTH_HANDLED.


* A bigger example.

The TestHSM example is too small, although it does show all the features of
cthsm.  So make a better, bigger example.


* Profiling.

When the bigger example does exist, profile it.  Find out if any bits of
CTHSM::CTHsm<C,E> are using up too much time.


* Test suite.

This is getting big enough that a test suite is needed.  A t/ directory a
la git is probably a good idea.

Some ideas for tests:

** Transition to a top state.

** Transition from a state to itself.

** Transition from the top state to somewhere else.

** Transition from the top state to itself.
